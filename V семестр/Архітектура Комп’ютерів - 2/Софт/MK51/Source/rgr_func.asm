SEL RB0
R0 = #5h; X1[15..8]
R1 = #5h; X1[7..0]
R2 = #5h; X2[15..8]
R3 = #5h; X2[7..0]
R4 = #5h; X5[15..8]
R5 = #5h; X5[7..0]
R6 = #5h; X6[15..8]
R7 = #5h; X6[7..0]
SEL RB1
R0 = #5h; X9[15..8]
R1 = #5h; X9[7..0]
R2 = #5h; X10[15..8]
R3 = #5h; X10[7..0]

;X2=-X2
SEL RB0
MOV A, R3
CPL A
MOV R3, A
MOV A, R2
CPL A
MOV R2, A
CLR C
MOV A, R3
ADDC A, #1h
MOV R3, A
MOV A, R2
ADDC A, #0h
MOV R2, A

;X1=X1-X2
CLR C
MOV A, R3
ADDC A, R1
MOV R1, A
MOV A, R2
ADDC A, R0
MOV R0, A

;X1=(X1-X2)/2
CLR C
MOV A, R0
RRC A
MOV R0, A
MOV A, R1
RRC A
MOV R1, A


;X1=(X1-X2)/4
CLR C
MOV A, R0
RRC A
MOV R0, A
MOV A, R1
RRC A
MOV R1, A


;X5=X5+X6
CLR C
MOV A, R5
ADDC A, R7
MOV R5, A
MOV A, R4
ADDC A, R6
MOV R4, A

;X1=(X1-X2)/4+(X5+X6)
CLR C
MOV A, R4
ADDC A, R1
MOV R1, A
MOV A, R5
ADDC A, R0
MOV R0, A

;X5=(X5+X6)*2
CLR C
MOV A, R5
RLC A
MOV R5, A
MOV A, R4
RLC A
MOV R4, A

;X5=(X5+X6)*4
CLR C
MOV A, R5
RLC A
MOV R5, A
MOV A, R4
RLC A
MOV R4, A

;X1=(X1-X2)/4+(X5+X6)*5
CLR C
MOV A, R4
ADDC A, R1
MOV R1, A
MOV A, R5
ADDC A, R0
MOV R0, A

;X9=X9+X10
SEL RB1
CLR C
MOV A, R3
ADDC A, R1
MOV R1, A
MOV A, R2
ADDC A, R0
MOV R0, A

;X9=(X9+X10)/2
CLR C
MOV A, R0
RRC A
MOV R0, A
MOV A, R1
RRC A
MOV R1, A

;X9=(X9+X10)/4
CLR C
MOV A, R0
RRC A
MOV R0, A
MOV A, R1
RRC A
MOV R1, A

;X9=(X9+X10)/8
CLR C
MOV A, R0
RRC A
MOV R0, A
MOV A, R1
RRC A
MOV R1, A

;X9=(X9+X10)/16
CLR C
MOV A, R0
RRC A
MOV R0, A
MOV A, R1
RRC A
MOV R1, A

;X9=(X1-X2)/4+(X5+X6)*5 + (X9+X10)/16

CLR C
SEL RB0
MOV A, R1
SEL RB1
ADDC A, R1
SEL RB0
MOV R1, A
MOV A, R0
SEL RB1
ADDC A, R0
SEL RB0
MOV R0, A


NOP
END
          

