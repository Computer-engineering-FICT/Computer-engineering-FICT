<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0073)http://www.lrn.ru/index.php?module=library&action=show&docid=105&part=965 -->
<HTML><HEAD><TITLE>Linux RuNEt - Библиотека</TITLE>
<META content="text/html; charset=koi8-r" http-equiv=Content-Type>
<META content=ru http-equiv=Content-Language>
<META content="MSHTML 5.00.2314.1000" name=GENERATOR></HEAD>
<BODY aLink=#000000 bgColor=#ffffff leftMargin=0 link=#000000 topMargin=0 
marginheight="0" marginwidth="0"><NOINDEX>
<CENTER>
<TABLE align=center border=0 cellPadding=0 cellSpacing=0 height=20 width=777>
  <TBODY>
  <TR>
    <TD align=middle height=18><IMG align=center border=0 height=47 
      src="Linux RuNEt - Библиотека_files/up.gif" width=777> <A 
      href="http://www.lrn.ru/index.php"><IMG border=0 height=14 
      src="Linux RuNEt - Библиотека_files/http.gif" width=632><IMG border=0 
      height=14 src="Linux RuNEt - Библиотека_files/home.gif" width=77></A><A 
      href="mailto:info@linux.ru.net"><IMG border=0 height=14 
      src="Linux RuNEt - Библиотека_files/mail.gif" width=68></A> </TD></TR>
  <TR>
    <TD align=middle height=51 vAlign=top width=781>
      <TABLE border=0 cellPadding=0 cellSpacing=0 height=1 width=777>
        <TBODY>
        <TR>
          <TD align=middle height=2 width=781>
            <TABLE border=0 cellPadding=0 cellSpacing=0 height=1 width=775>
              <TBODY>
              <TR>
                <TD align=middle bgColor=#000000 height=1 width=60><IMG 
                  border=0 height=1 src="Linux RuNEt - Библиотека_files/pxl.gif" 
                  width=1></TD></TR></TBODY></TABLE>
            <TABLE border=0 cellPadding=0 cellSpacing=1 height=5 width=777>
              <TBODY>
              <TR>
                <TD align=middle vAlign=center width=86><A 
                  href="http://www.lrn.ru/index.php"><FONT 
                  size=2>Главная</A></FONT></TD>
                <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
                  src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
                <TD align=middle vAlign=center width=86><A 
                  href="http://www.lrn.ru/index.php?module=news"><FONT 
                  size=2>Новости</A></FONT></TD>
                <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
                  src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
                <TD align=middle vAlign=center width=86><A 
                  href="http://www.lrn.ru/index.php?module=gallery"><FONT 
                  size=2>Галерея</A></FONT></TD>
                <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
                  src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
                <TD align=middle bgColor=#6070b0 vAlign=center width=86><B><A 
                  href="http://www.lrn.ru/index.php?module=library"><FONT 
                  color=#ffffff size=2>Библиотека</FONT></A></B></TD>
                <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
                  src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
                <TD align=middle vAlign=center width=86><A 
                  href="http://www.lrn.ru/index.php?module=linuxfest"><FONT 
                  size=2>Фестиваль</A></FONT></TD>
                <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
                  src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
                <TD align=middle vAlign=center width=86><A 
                  href="http://www.lrn.ru/index.php?module=forums"><FONT 
                  size=2>Форум</A></FONT></TD>
                <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
                  src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
                <TD align=middle vAlign=center width=86><A 
                  href="http://www.lrn.ru/index.php?module=links"><FONT 
                  size=2>Ссылки</A></FONT></TD>
                <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
                  src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
                <TD align=middle vAlign=center width=86><A 
                  href="http://www.lrn.ru/index.php?module=chat"><FONT 
                  size=2>Чат</A></FONT></TD>
                <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
                  src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
                <TD align=middle vAlign=center width=86><A 
                  href="http://www.lrn.ru/index.php?module=setup"><FONT 
                  size=2>Настройки</A></FONT></TD></TR></TBODY></TABLE>
            <TABLE border=0 cellPadding=0 cellSpacing=0 height=1 width=775>
              <TBODY>
              <TR>
                <TD align=middle bgColor=#000000 height=1 width=60><IMG 
                  border=0 height=1 src="Linux RuNEt - Библиотека_files/pxl.gif" 
                  width=1></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<TABLE align=center border=0 cellPadding=0 cellSpacing=0 height=20 width=777>
  <TBODY>
  <TR>
    <TD height=66 vAlign=top width=794>
      <TABLE border=0 width="100%">
        <TBODY>
        <TR>
          <TD>
            <FORM action=setup/restore_cookies.php 
            encType=" multipart/form-data" method=post>Имя:<INPUT 
            name=get_username size=10>Пароль:<INPUT name=get_password size=7 
            type=password> <INPUT name=referer type=hidden 
            value=/index.php?module=library&amp;action=show&amp;docid=105&amp;part=965> 
<INPUT name=login type=submit value=Login></FORM></TD>
          <TD align=right>
            <TABLE border=0>
              <TBODY>
              <TR>
                <TD align=left><I>&nbsp;&nbsp;&nbsp;Hello, and thank you for 
                  calling MicroSoft Technical Support. May I ask what version of 
                  Code Red your server is running? </I></TD></TR>
              <TR>
                <TD align=right><B>(c) Code Red Warn 
            site</B></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
      <CENTER>
      <CENTER><A href="http://www.connect-personal.ru/" target=_new><IMG 
      alt="Не помешает" border=0 
      src="Linux RuNEt - Библиотека_files/cp-010-6-2.gif"></A></CENTER></CENTER><BR></NOINDEX>
      <CENTER>
      <H2>Библиотека Linux RuNEt </H2></CENTER>
      <CENTER>
      <H2><A href="http://www.lrn.ru/index.php?module=library">man</A> / <A 
      href="http://www.lrn.ru/index.php?module=library&amp;action=subgroup&amp;subgroupid=3">2</A>
      <HR>
      </CENTER></H2>
      <H1>SETUID</H1>Section: Руководство программиста Linux (2)<BR>Updated: 
      29 July 1994<BR><A 
      href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;docid=105&amp;part=965#index">Содержание</A> 

      <HR>
      <A name=lbAB>&nbsp;</A> 
      <H2>НАЗВАНИЕ</H2>setuid - установить идентификатор пользователя <A 
      name=lbAC>&nbsp;</A> 
      <H2>КРАТКАЯ СВОДКА</H2><B>#include &lt;<A 
      href="file:///usr/include/unistd.h">unistd.h</A>&gt;</B> 
      <P><B>int setuid(uid_t </B><I>uid</I><B>)</B> <A name=lbAD>&nbsp;</A> 
      <H2>ОПИСАНИЕ</H2><B>setuid</B> устанавливает фактический идентификатор 
      владельца текущего процесса. Если фактический пользователь, вызвавший эту 
      функцию -- root, то действительный и сохраненный идентификаторы также 
      устанавливаются. 
      <P>Под Linux <B>setuid</B> реализован как в стандарте POSIX с возможностью 
      _POSIX_SAVED_IDS. Это позволяет setuid-программам (не setuid-root) 
      сбрасывать все привилегии, делать непривилегированную работу, а затем 
      безопасно возвращать себе исходный фактический идентификатор пользователя. 

      <P>Если пользователь -- root, или программа установлена как setuid root, 
      нужна особенная осторожность. Функция <B>setuid</B> проверяет фактический 
      идентификатор вызвавшего пользователя и, если это супер-пользователь, то 
      все идентификаторы устанавливаются в <I>uid</I>. После этого программа уже 
      никак не сможет вернуть обратно права пользователя root. 
      <P>Таким образом, setuid-root программа, желающая временно сбросить права 
      root, на время сделаться другим пользователем, а затем восстановить права 
      root, не может пользоваться <B>setuid</B>. Требуемого результата можно 
      достичь с помощью вызова <B>seteuid</B>, которого нет в POSIX, но есть в 
      BSD. <A name=lbAE>&nbsp;</A> 
      <H2>ВОЗВРАЩАЕМОЕ ЗНАЧЕНИЕ</H2>В случае успеха возвращается ноль. При 
      ошибке возвращается -1, а <I>errno</I> устанавливается должным образом. 
      <P><A name=lbAF>&nbsp;</A> 
      <H2>ОШИБКИ</H2>
      <DL compact>
        <DT><B>EPERM</B> 
        <DD>Пользователь не является суперпользователем, а <I>uid</I> не 
        совпадает с фактическим или сохраненным идентификатором владельца 
        текущего процесса. </DD></DL><A name=lbAG>&nbsp;</A> 
      <H2>СООТВЕТСТВИЕ СТАНДАРТАМ</H2>SVr4, SVID, POSIX.1. Этот системный вызов 
      не совсем совместим с 4.4BSD, который устанавливает действительный, 
      сохраненный и фактический идентификаторы пользователя. SVr4 документирует 
      дополнительный код ошибки EINVAL. <A name=lbAH>&nbsp;</A> 
      <H2>ЗАМЕЧАНИЯ ПО СПЕЦИФИКЕ LINUX</H2>Linux поддерживает концепция 
      идентификатора пользователя файловой системы, обычно совпадающего с 
      фактическим идентификатором. Системный вызов <B>setuid</B> также 
      устанавливает идентификатор пользователя файловой системы. Смотри <B><A 
      href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;areaname=man&amp;subarea=2&amp;file=setfsuid">setfsuid</A></B>(2). 

      <P>Если <I>uid</I> отличается от старого фактического идентификатора, то 
      процессу нельзя будет создавать файлы дампа памяти (core). <A 
      name=lbAI>&nbsp;</A> 
      <H2>СМОТРИ ТАКЖЕ</H2><B><A 
      href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;areaname=man&amp;subarea=2&amp;file=getuid">getuid</A></B>(2), 
      <B><A 
      href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;areaname=man&amp;subarea=2&amp;file=setreuid">setreuid</A></B>(2), 
      <B><A 
      href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;areaname=man&amp;subarea=2&amp;file=seteuid">seteuid</A></B>(2), 
      <B><A 
      href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;areaname=man&amp;subarea=2&amp;file=setfsuid">setfsuid</A></B>(2) 
      <A name=lbAJ>&nbsp;</A> 
      <H2>ПЕРЕВОД</H2>Перевод Copyright (C) Alexey Mahotkin &lt;<A 
      href="mailto:alexm@hsys.msk.ru">alexm@hsys.msk.ru</A>&gt; 2000 
      <P><A 
      href="http://alexm.here.ru/manpages-ru/">http://alexm.here.ru/manpages-ru/</A> 

      <P>
      <HR>
      <A name=index>&nbsp;</A>
      <H2>Index</H2>
      <DL>
        <DT><A 
        href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;docid=105&amp;part=965#lbAB">НАЗВАНИЕ</A>
        <DD>
        <DT><A 
        href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;docid=105&amp;part=965#lbAC">КРАТКАЯ 
        СВОДКА</A>
        <DD>
        <DT><A 
        href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;docid=105&amp;part=965#lbAD">ОПИСАНИЕ</A>
        <DD>
        <DT><A 
        href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;docid=105&amp;part=965#lbAE">ВОЗВРАЩАЕМОЕ 
        ЗНАЧЕНИЕ</A>
        <DD>
        <DT><A 
        href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;docid=105&amp;part=965#lbAF">ОШИБКИ</A>
        <DD>
        <DT><A 
        href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;docid=105&amp;part=965#lbAG">СООТВЕТСТВИЕ 
        СТАНДАРТАМ</A>
        <DD>
        <DT><A 
        href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;docid=105&amp;part=965#lbAH">ЗАМЕЧАНИЯ 
        ПО СПЕЦИФИКЕ LINUX</A>
        <DD>
        <DT><A 
        href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;docid=105&amp;part=965#lbAI">СМОТРИ 
        ТАКЖЕ</A>
        <DD>
        <DT><A 
        href="http://www.lrn.ru/index.php?module=library&amp;action=show&amp;docid=105&amp;part=965#lbAJ">ПЕРЕВОД</A>
        <DD></DD></DL>
      <HR>
      This document was created by <A href="http://linux.ru.net/">LRN2</A>, and 
      powered on man2html.<BR>
      <HR>

      <CENTER>
      <H2><A href="http://www.lrn.ru/index.php?module=library">man</A> / <A 
      href="http://www.lrn.ru/index.php?module=library&amp;action=subgroup&amp;subgroupid=3">2</A>
      <HR>
      </CENTER></H2>
      <HR>
      Скачать:<BR><A 
      href="http://www.lrn.ru/filewrap.php?action=download&amp;docid=105&amp;elementid=966">arhived/setuid.html-koi8r.tar.gz</A> 
      - 2Kb<BR><A 
      href="http://www.lrn.ru/filewrap.php?action=download&amp;docid=105&amp;elementid=967">setuid.2.bz2</A> 
      - 2Kb<BR>
      <TABLE border=0 cellPadding=0 cellSpacing=1 height=5 width=777>
        <TBODY>
        <TR><NOINDEX>
          <TD align=middle vAlign=center width=86><A 
            href="http://www.lrn.ru/index.php"><FONT 
size=2>Главная</A></FONT></TD>
          <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
            src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
          <TD align=middle vAlign=center width=86><A 
            href="http://www.lrn.ru/index.php?module=news"><FONT 
            size=2>Новости</A></FONT></TD>
          <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
            src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
          <TD align=middle vAlign=center width=86><A 
            href="http://www.lrn.ru/index.php?module=gallery"><FONT 
            size=2>Галерея</A></FONT></TD>
          <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
            src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
          <TD align=middle bgColor=#6070b0 vAlign=center width=86><B><A 
            href="http://www.lrn.ru/index.php?module=library"><FONT 
            color=#ffffff size=2>Библиотека</FONT></A></B></TD>
          <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
            src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
          <TD align=middle vAlign=center width=86><A 
            href="http://www.lrn.ru/index.php?module=linuxfest"><FONT 
            size=2>Фестиваль</A></FONT></TD>
          <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
            src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
          <TD align=middle vAlign=center width=86><A 
            href="http://www.lrn.ru/index.php?module=forums"><FONT 
            size=2>Форум</A></FONT></TD>
          <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
            src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
          <TD align=middle vAlign=center width=86><A 
            href="http://www.lrn.ru/index.php?module=links"><FONT 
            size=2>Ссылки</A></FONT></TD>
          <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
            src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
          <TD align=middle vAlign=center width=86><A 
            href="http://www.lrn.ru/index.php?module=chat"><FONT 
            size=2>Чат</A></FONT></TD>
          <TD bgColor=#000000 vAlign=center width=1><IMG border=0 
            src="Linux RuNEt - Библиотека_files/pxl.gif"></TD>
          <TD align=middle vAlign=center width=86><A 
            href="http://www.lrn.ru/index.php?module=setup"><FONT 
            size=2>Настройки</A></FONT></TD></TR></TBODY></TABLE></TD>
  <TR>
    <TD align=middle bgColor=#000000 height=1 vAlign=center width=777>
      <P align=center><IMG border=0 height=1 
      src="Linux RuNEt - Библиотека_files/pxl.gif" width=1><FONT size=2><IMG 
      border=0 height=1 src="Linux RuNEt - Библиотека_files/pxl.gif" 
      width=1></FONT></P></TD></TR>
  <TR>
    <TD align=middle bgColor=#6070b0 height=34 vAlign=center width=777>
      <TABLE border=0 cellPadding=0 cellSpacing=0 height=1 width=283>
        <TBODY>
        <TR>
          <TD bgColor=#6070b0 height=1 width=283>
            <P align=center><FONT color=#ffffff size=1>Дизайн и Оформление 
            Павлова Стаса aka Sin.dR_0m</FONT></P></TD></TR>
        <TR>
          <TD bgColor=#6070b0 height=1 width=283>
            <P align=center><A href="mailto:info@linux.ru.net"><FONT 
            color=#ffffff 
      size=1>info@linux.ru.net</FONT></A></P></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD align=middle bgColor=#000000 height=1 vAlign=center width=777><IMG 
      border=0 height=1 src="Linux RuNEt - Библиотека_files/pxl.gif" 
  width=1></TD></TR></TBODY></TABLE>
<CENTER><BR><A href="http://source.linux.ru.net/"><IMG alt="powered by LRN2" 
border=0 src="Linux RuNEt - Библиотека_files/lrn2logo.powered.gif" width=88 
hight="31"></A><BR><BR><!--TopList COUNTER--><A 
href="http://top.list.ru/jump?from=52201" target=_top><IMG alt=TopList border=0 
height=18 src="" width=88></A><!--TopList COUNTER--> <!--begin of Top100--><A 
href="http://top100.rambler.ru/top100/"><IMG alt="Rambler's Top100 Service" 
border=0 height=63 src="Linux RuNEt - Библиотека_files/top100.gif" width=81></A> 
<!--end of Top100 code--><A href="http://www.altlinux.ru/"><IMG alt=ALTLinux 
border=0 src="Linux RuNEt - Библиотека_files/altlinux.gif"> </A><A 
href="http://linux.ru.net/index.php?module=links"><IMG alt="LRN Counter" 
border=0 src="Linux RuNEt - Библиотека_files/counter.gif"> </A><BR><!--BEGIN Krutilka.RU "linux", GEOMETRY: 468x60, GRAPHICS ONLY--><A 
href="http://ad.krutilka.ru/r1005x8x-996158463.html" target=_top><IMG border=0 
src="Linux RuNEt - Библиотека_files/bb.gif"></A> 
<!--END Krutilka.RU--></NOINDEX></CENTER></CENTER></BODY></HTML>
