<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=windows-1251">
<meta name="Author" content>
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title></title>
</head>

<body background="fill_mk48.jpg" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/images/fill_mk48.jpg">

<p><a name="Содержание"></a><font color="#000000"
size="5"><strong>5. Использование внешней
памяти и расширенного ввода/вывода</strong></font></p>

<ul type="disc">
    <li><a
        href="useexternalmem_mk48.htm#мк - системы с внешней памятью программ" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/mk48/useexternalmem_mk48.htm#мк - системы с внешней памятью программ"><font
        color="#0000FF" size="4">5.1. МК-система с
        внешней памятью программ</font></a></li>
    <li><a
        href="useexternalmem_mk48.htm#мк-система с внешней памятью данных" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/mk48/useexternalmem_mk48.htm#мк-система с внешней памятью данных"><font
        color="#0000FF" size="4">5.2. МК-система с
        внешней памятью данных</font></a></li>
    <li><a
        href="useexternalmem_mk48.htm#мк-система с расширенны вводом/выводом" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/mk48/useexternalmem_mk48.htm#мк-система с расширенны вводом/выводом"><font
        color="#0000FF" size="4">5.3. МК-система с
        расширенным вводом/выводом</font></a></li>
</ul>

<hr size="4" color="#000000">

<p><font size="4">В тех случаях, когда
функционально-логических
возможностей одно-кристального МК
оказывается недостаточно, можно
относительно про-стыми средствами
расширить МК-систему до следующих
размеров: память программ - до 4
Кбайт; память данных - до 320 байт;
линии ввода/вывода - практически
неограниченно. </font></p>

<p><font size="4">Кроме того, путем
подключения специализированных
БИС, входящих в микропроцессорный
комплект К580, в МК-системе могут
быть реали-зованы различные
вспомогательные функции: связь с
дисплеем и кла-виатурой,
многоуровневая программируемая
система прерываний, сложная
система таймирования, связь с
телеграфно-телефонными линиями
передачи информации и т.д. С
использованием средств
буферирования и
мультиплексирования
адресов/данных можно под
управлением программы создавать
МК-системы любых требуемых состава
и назначения. </font></p>

<p>&nbsp;</p>

<p><a href="#содержание"><font color="#0000FF" size="4">Использование
внешней памяти и расширенного
ввода/вывода</font></a></p>

<hr color="#008000">

<p align="left"><a
name="МК - системы с внешней памятью программ"></a><font
color="#000000" size="5"><strong>5.1. </strong><strong><b>МК -
системы с внешней памятью программ </b></strong></font></p>

<hr color="#008000">

<p><font size="4">Шина BUS по своим свойствам
подобна двунаправленной шине
дан-ных микропроцессора К580, и вес
расширения МК выполняются с
ис-пользованием этой шины. При
обращении к резидентной памяти
программ МК не генерирует внешних
управляющих сигналов (за
исключением САВП, который всегда
идентифицирует каждый машин-ный
цикл). Начиная с адреса 1024, МК
автоматически формирует
управляющие сигналы,
обеспечивающие выборку команд из
внешней памяти. </font><a href="#рис.2.12"><font
color="#FF0000" size="4">Рисунок 2.12</font></a><font
size="4"> иллюстрирует процесс выборки
команды из внешней памяти: </font></p>

<ul>
    <li><font size="4">содержимое счетчика
        команд выводится через порт ВUS
        и младшую тетраду порта Р2; </font></li>
    <li><font size="4">по срезу сигнала САВП
        на внешним регистре
        фиксируется адрес; </font></li>
    <li><font size="4">сигналом ¬РВПП
        разрешается работа внешней
        памяти; </font></li>
    <li><font size="4">по спаду сигнала РВПП
        шина BUS переходит в режим ввода.</font></li>
</ul>

<p><font size="4">Ячейки памяти с адресами,
лежащими за пределами банка памяти
0, могут быть доступны после
выполнения команды переключения
банков памяти SEL МВ1, за которой
должна следовать команда перехода
(JМР или CALL ). </font><a name="рис.2.12"></a></p>

<p align="center"><img src="timevpp_mk48.gif" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/images/timevpp_mk48.gif"
border="3" width="262" height="176"></p>

<p align="center"><font size="4"><b>Рис. 2.12.
Временная диограмма выборки
команды из ВПП</b></font> </p>

<p><font size="4">На </font><a href="#рис.2.13"><font
color="#FF0000" size="4">рис. 2.13</font></a><font
color="#FF0000" size="4"> </font><font size="4">показана
структура МК-системы с внешней
памятью программ.</font></p>

<p align="center"><a name="рис.2.13"></a></p>

<p align="center"><img src="struct_vpp_mk48.gif" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/images/struct_vpp_mk48.gif"
border="3" width="540" height="317"></p>

<p align="center"><font size="4"><b>Рис. 2.13.
Структура МК-системы с внешней
памятью программ</b></font></p>

<p><font size="4">Три дополнительные БИС
памяти емкостью по 1 Кбайту
подключаются к шине BUS своими
информационными выходами. Младший
байт адреса по сигналу САВП
фиксируется на внешнем буферном
регистре. Старшая тетрада адреса,
выводимая через порт Р2, не
нуждается в буферизации, так как
она стабильна на протяжении всего
цикла выборки. Два самых старших
бита адреса заводятся на внешний
дешифратор (стробируемый сигналом
РВПП) для селекции требуемой БИС
памяти программ. </font></p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p><a href="#содержание"><font color="#0000FF" size="4">Использование
внешней памяти и расширенного
ввода/вывода</font></a></p>

<hr color="#008000">

<p align="left"><a
name="МК-система с внешней памятью данных"></a><font
color="#000000" size="5"><strong>5.2. </strong><b>МК-система
с внешней памятью данных </b></font></p>

<hr color="#008000">

<p><font size="4">На </font><a href="#рис.2.14"><font
color="#FF0000" size="4">рис. 2.14</font></a><font size="4">
показана схема МК-системы, в состав
которой включены две
дополнительные БИС ОЗУ суммарной
емкостью 256 байт.</font></p>

<p align="center"><a name="рис.2.14"></a></p>

<p align="center"><img src="struct_vpd_mk48.gif" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/images/struct_vpd_mk48.gif"
border="3" width="540" height="256"></p>

<p align="center"><font size="4"><b>Рис. 2.14.
Структура МК-системы с внешней
памятью данных </b></font></p>

<p><font size="4">Внешняя оперативная
память доступна МК по командам
пересылки МОVХ А, @R и МOVX @R,А , которые
по косвенному адресу (регистры RО и
R1) выполняют операции передачи
байта между ВПД и аккумулятором.
Сигналом САВП косвенный адрес,
выводимый по шине BUS, фиксируется </font></p>

<p><font size="4">в многорежимном буферном
регистре МБР. Сигналы ЗП и ЧТ
определяют режим работы БИС ОЗУ.
Так как косвенный адрес имеет
формат байта, то схема на </font><a
href="#рис.2.14"><font color="#FF0000" size="4">рис. 2.14</font></a><font
size="4"> обеспечивает адресацию 256
ячеек ОЗУ в дополнение к 64 ячейкам
резидентной памяти данных МК48. </font></p>

<p><font size="4">При необходимости
дальнейшего наращивания объема
внешнего ОЗУ можно программным
способом реализовать механизм
&quot;перелистывания'' страниц памяти
через дополнительные линии порта Р2
подобно тому, как это сделано на </font><a
href="#рис.2.13"><font color="#FF0000" size="4">рис. 2.13</font></a><font
size="4">. </font></p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p><a href="#содержание"><font color="#0000FF" size="4">Использование
внешней памяти и расширенного
ввода/вывода</font></a></p>

<hr color="#008000">

<p align="left"><a
name="МК-система с расширенны вводом/выводом"></a><font
color="#000000" size="5"><b>5.3. МК-система с
расширенны вводом/выводом </b></font></p>

<hr color="#008000">

<p><font size="4">Для сопряжения МК с
объектом имеющим большое число
входов/ выходов, можно расширить
резидентную систему ввода/вывода,
подключив к МК необходимое
количество внешних портов. Такое
расшире-ние может быть выполнено
двумя способами: с использованием
стандартного расширителя
ввода/вывода (РВВ) КР580ВР43 или
интерфейсных БИС (КР580ВВ55, КР580ВВ51).</font></p>

<p><font size="4">Расширитель подключается
к МК48 так, как показано на </font><a
href="#рис.2.15."><font color="#FF0000" size="4">рис. 2.15
а</font></a><font size="4">. Каждый из четырех
портов РВВ может использоваться
для ввода или вывода информации
независимо от остальных и
обеспечивает высокую нагрузочную
способность. Для вывода байта
дан-ных в порты Р4 и Р5 можно
воспользоваться следующей
последовательностью команд: </font></p>

<blockquote>
    <p><font color="#0080C0" size="4"><b>MOVD P4, A</b></font><font
    color="#0000FF" size="4"><b>  </b></font><font
    color="#FF00FF" size="4"><em>;Вывод А(0...3) в
    порт 4</em></font></p>
    <p><font color="#0080C0" size="4"><b>SWAP A  </b></font><font
    color="#0000FF" size="4"><b>       </b></font><font
    color="#FF00FF" size="4"><em> ;Обмен тетрад
    аккумулятора </em></font></p>
    <p><font color="#0080C0" size="4"><b>MOVD P5, A</b></font><font
    color="#0000FF" size="4"><b>   </b></font><font
    color="#FF00FF" size="4"><em>;Вывод второй
    тетрады в порт 5 </em></font></p>
</blockquote>

<p><font size="4">На </font><a href="#рис.2.15."><font
color="#FF0000" size="4">рис. 2.15 б,в</font></a><font
size="4"> показаны два варианта
расширения ввода/вывода с
использованием параллельного
периферийного адаптера (ППА)
КР580ВВ55. В первом варианте (</font><a
href="#рис.2.15."><font color="#FF0000" size="4">рис. 2.15
б</font></a><font size="4">) порты адаптера
адресуются </font><a name="рис.2.15."></a></p>

<p align="center"><img src="inpout_mk48.gif" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/images/inpout_mk48.gif" border="3"
width="332" height="431"></p>

<p align="center"><font size="4"><b>Рис. 2.15.
Варианты расширения ввода/вывода
информации в МК-системах </b></font></p>

<p><font size="4">как ячейки ВПД, доступ к
которым осуществляется по командам
МОVХ. Например, для вывода байта в
порт В необходимо выполнить две
команды: </font></p>

<blockquote>
    <p><font color="#0080C0" size="4"><b>MOV      R1 ,#1</b></font><font
    color="#0000FF" size="4"><b>   </b></font><font
    color="#FF00FF" size="4"><em>;(R1) = Адрес порта В
    </em></font></p>
    <p><font color="#0080C0" size="4"><b>MOVX @R1 ,А</b></font><font
    color="#0000FF" size="4"><b>  </b></font><font
    color="#FF00FF" size="4"><em> ;Вывод в порт В из
    аккумулятора </em></font></p>
</blockquote>

<p><font size="4">Для второго варианта
подключения ППА (</font><a href="#рис.2.15."><font
color="#FF0000" size="4">рис. 2.15 в</font></a><font size="4">),
выбор порта осуществляется через
установку/сброс двух разрядов
порта Р2. Так, для вывода байта
данных в порт А можно
воспользоваться следующими
командами: </font></p>

<blockquote>
    <p><font color="#0080C0" size="4"><b>ANL P2, #0FCH</b></font><font
    color="#FF00FF" size="4"><em> ;Сброс А0 и А1
    адаптера </em></font></p>
    <p><font color="#0080C0" size="4"><b>OUT BUS, A </b></font><font
    color="#0000FF" size="4"><b>    </b></font><font
    color="#FF00FF" size="4"><em>  ;Вывод байта в
    порт А </em></font></p>
</blockquote>

<p><font size="4">В рассмотренных выше
схемах расширения используется
только по одной внешней БИС, и
поэтому их вход ВК подсоединяется к
земле, При необходимости к МК может
быть подключено несколько РВВ и
ППА. </font></p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p><a href="#содержание"><font color="#0000FF" size="4">Использование
внешней памяти и расширенного
ввода/вывода</font></a></p>

<hr size="4" color="#008000">
<div align="center"><center>

<table border="0" cellpadding="20" cellspacing="0">
    <tr>
        <td><a href="start_mk48.htm" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/mk48/start_mk48.htm"><font color="#0000FF"
        size="5" face="Times New Roman"><strong><tt>КМ1816ВЕ48</tt></strong></font></a></td>
        <td><a href="start_mk51.htm" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/mk51/start_mk51.htm"><font
        color="#0000FF" size="5" face="Times New Roman"><strong><tt>КМ1816ВЕ51</tt></strong></font></a></td>
        <td><a href="start.htm" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/start.htm"><font color="#0000FF" size="4">Первая
        страница</font></a></td>
    </tr>
</table>
</center></div>
</body>
</html>
