<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=windows-1251">
<meta name="Author" content>
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title></title>
</head>

<body background="fill_mk48.jpg" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/images/fill_mk48.jpg">

<p><a name="Содержание"></a><font color="#000000"
size="5"><b>4. Особенности работы МК48 на
этапе отладки прикладных программ </b></font></p>

<ul type="disc">
    <li><a
        href="specialwork_mk48.htm#микроконтроллер в пошаговом режиме" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/mk48/specialwork_mk48.htm#микроконтроллер в пошаговом режиме"><font
        color="#0000FF" size="4">4.1.
        Микроконтроллер в пошаговом
        режиме работы и в режиме
        внешнего доступа</font></a></li>
    <li><a
        href="specialwork_mk48.htm#загрузка прикладных программ в резидентную" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/mk48/specialwork_mk48.htm#загрузка прикладных программ в резидентную"><font
        color="#0000FF" size="4">4.2. Загрузка
        прикладных программ в
        резидентную
        памятьмикроконтроллера</font></a></li>
</ul>

<hr size="4" color="#000000">

<p align="left"><a
name="Микроконтроллер в пошаговом режиме"></a><font
color="#000000" size="5"><b>4.1. Микроконтроллер
в пошаговом режиме работы и в
режиме внешнего доступа</b></font></p>

<hr color="#008000">

<p><font size="4"><b>Пошаговый режим.</b>
Схема запуска и временная
диаграмма работы МК в пошаговом
режиме показаны на </font><a href="#рис.2.10."><font
color="#FF0000" size="4">рис. 2.10</font></a><font size="4">.
Этот режим использует-ся на этапе
отладки МК-системы и предоставляет
разработчику возможность
выполнить прикладную программу
покомандно. </font></p>

<p><font size="4">Сигнал ¬ШАГ = 0
останавливает работу МК после
окончания цикла те-кущей команда,
после чего МК выдает
подтверждающий сигнал САВП = 1. Для
вывода МК из состояния останова
необходимо подать сигнал ¬ШАГ = 1 ,
на который МК откликается
генерацией подтверждающего,
сигнала САВП = 0. Для того чтобы МК
остановился после следующей
команды, на вход ¬ШАГ вновь должен
быть подан сигнал 0, как только
сигнал САВП станет равным нулю.
Переход от команды к команде
осуществляется по нажатию кнопки
¬ШАГ, устанавливающей буферный
D-триггер по входу синхронизации.
Сигнал ¬ШАГ на выходе D-триггера не
приобретет значение 1 до тех пор,
пока сигнал САВП не будет равен 1 .
Так как вход R асинхронного сброса
D-триггера эквивалентен трем
ТТЛ-нагрузкам, то между выходом
САВП и входом сброса D-триггера
необходимо установить усилитель. </font></p>

<p><font size="4"><b>Режим внешнего доступа.</b>
Подача уровня +5 В на вход ОРПП
позво-ляет отключить резидентную
память программ МК и осуществлять
вы-борку команд только из внешней
памяти. Этот режим работы удобен на
этапе отладки МК-системы, так как
позволяет пользователю подклю-чать
внешнюю память, содержащую или
диагностическую программу, или
варианты прикладной программы. При
помощи этого же сигнала ОРПП с
уровнем +25 В возможно выполнить
чтение содержимого РПП извне, что
необходимо на этапе
программирования МК для проверки
вводимой информации. </font></p>

<p><font size="4"><b>а)</b></font><a name="рис.2.10."></a></p>

<dl>
    <dd><p align="center"><img src="stepwork_mk48.gif" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/images/stepwork_mk48.gif"
        align="middle" border="3" width="399" height="244"></p>
    </dd>
</dl>

<dl>
    <dd><font size="4"><b>б)</b></font></dd>
</dl>

<p align="center"><img src="steptimediogram_mk48.gif" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/images/steptimediogram_mk48.gif"
align="middle" border="3" width="529" height="258"></p>

<dl>
    <dd><p align="center"><font size="4"><b>Рис. 2.10.
        Схема (а) и временная диаграмма
        (б) пошагового режима работы
        МК48 </b></font></p>
    </dd>
</dl>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p><a href="#содержание"><font color="#0000FF" size="4">Особенности
работы МК48 на этапе отладки
прикладных программ</font></a></p>

<hr color="#008000">

<p align="left"><a
name="Загрузка прикладных программ в резидентную"></a><font
color="#000000" size="5"><b>4.2. Загрузка
прикладных программ в резидентную
память микроконтроллера </b></font></p>

<hr color="#008000">

<p><font size="4">Процесс загрузки
прикладных программ в РПП
микроконтроллера, не очень точно
называемый процессом
программирования МК, требует
использования программатора,
генерирующего специальные сигналы
и предоставляющего средства ввода
в МК адресов/данных и средства
визуального или иного контроля
введенной информации. Процесс
загруз-ки программ в РПП состоит из
ряда последовательных действий:</font></p>

<ol>
    <li><font size="4">настройки на режим
        загрузки РПП (VDD = +5 В, XI
        синхросигнал с частотой 1-6 МГц,
        ¬СБР = 0; Т0 = +5 В, ОРПП = +5 В); </font></li>
    <li><font size="4">установки БИС МК18 в
        панельку (сокет) программатора;
        </font></li>
    <li><font size="4">инициализации режима
        загрузки (Т0 = 0, ОРПП = +25 В; ПРОГ=0)
        ; </font></li>
    <li><font size="4">подачи кода адреса на
        шину порта ВUS и линии 0 и 1 порта
        Р2 в соответствии со схемой на </font><a
        href="#рис.2.11."><font color="#FF0000" size="4">рис.
        2. 11 а</font></a><font size="4">; </font></li>
    <li><font size="4">подачи +5 В на вход СБР
        (защелка адреса); </font></li>
    <li><font size="4">подачи байта на шину
        парта BUS; </font></li>
    <li><font size="4">подача электропитания
        загрузки (VDD = +25 В) ; </font></li>
    <li><font size="4">подачи импульса
        загрузки (ПРОГ = +25 В
        длительностью 50 мс). </font></li>
    <li><font size="4">снятия электропитания
        загрузки (VDD = +5 В) ; </font></li>
    <li><font size="4">задания режима
        проверки (Т0 = +5 В) ; </font></li>
    <li><font size="4">чтения и проверки
        байта на шине BUS; </font></li>
    <li><font size="4">перехода к загрузке
        следующего байта прикладной
        программы (Т0=0, ¬СБР=0; перехода
        к п.4 данной последовательности
        действий); </font></li>
    <li><font size="4">выполнения п.1 по
        окончании загрузки прикладной
        программы; </font></li>
    <li><font size="4">удаления БИС МК48 из
        панельки программатора. </font></li>
</ol>

<p><font size="4"><b>а)</b></font><a name="рис.2.11."></a></p>

<p align="center"><img src="loadmemo_mk48.gif" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/images/loadmemo_mk48.gif"
border="3" width="514" height="441"></p>

<p><font size="4"><b>б)</b></font><a name="рис.2.11б"></a></p>

<p align="center"><img src="timeload_mk48.gif" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/images/timeload_mk48.gif"
border="3" width="531" height="312"></p>

<p>&nbsp;</p>

<p align="center"><font size="4"><b>Рис. 2.11. Схема (а)
и временная диограмма (б) загрузки
РПП с контролем вводимой
информации</b></font> </p>

<p><font size="4">При загрузке программ в
РПП участвует большая группа
контактов корпуса МК, сигналы на
которых должны формироваться в
строго опре-деленной
последовательности. Эта временная
последовательность приводится на </font><a
href="#рис.2.11б"><font color="#FF0000" size="4">рис.
2.11, б</font></a><font size="4">. Верификация
прикладной программы, содержащейся
в резидентной памяти МК, может быть
выполнена путем прочтения ее
содержимого в режиме внешнего
доступа.</font></p>

<p>&nbsp;</p>

<p><a href="#содержание"><font color="#0000FF" size="4">Особенности
работы МК48 на этапе отладки
прикладных программ</font></a></p>

<hr size="4" color="#008000">
<div align="center"><center>

<table border="0" cellpadding="20" cellspacing="0">
    <tr>
        <td><a href="start_mk48.htm" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/mk48/start_mk48.htm"><font color="#0000FF"
        size="5" face="Times New Roman"><strong><tt>КМ1816ВЕ48</tt></strong></font></a></td>
        <td><a href="start_mk51.htm" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/mk51/start_mk51.htm"><font
        color="#0000FF" size="5" face="Times New Roman"><strong><tt>КМ1816ВЕ51</tt></strong></font></a></td>
        <td><a href="start.htm" tppabs="http://ofap.ulstu.ru/res/REFER_BOOK_MK48&MK51/start.htm"><font color="#0000FF" size="4">Первая
        страница</font></a></td>
    </tr>
</table>
</center></div>
</body>
</html>
